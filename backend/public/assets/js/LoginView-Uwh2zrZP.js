import{_ as g,c as d,a as t,w,f as v,g as m,v as p,t as y,h as u,i as b,j as x,k,d as l,u as h,e as f}from"./index-BS7-ax_o.js";const S={setup(){const n=l(""),e=l(""),i=l(""),{refreshCart:o}=h();return{email:n,password:e,error:i,handleLogin:async()=>{try{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.value,password:e.value})}),r=await s.json();if(!s.ok)throw new Error(r.error);localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),o(),window.location.href="/"}catch(s){i.value=s.message}}}}},V={class:"container animate-fade-in",style:{"max-width":"400px","margin-top":"3rem"}},_={class:"card p-4"},C={class:"form-group"},N={class:"form-group"},L={key:0,class:"message error"},T={class:"text-center mt-4"};function j(n,e,i,o,c,s){const r=k("router-link");return f(),d("div",V,[t("div",_,[e[8]||(e[8]=t("h2",{class:"text-center mb-4"},"Вход",-1)),t("form",{onSubmit:e[2]||(e[2]=w((...a)=>o.handleLogin&&o.handleLogin(...a),["prevent"]))},[t("div",C,[e[3]||(e[3]=t("label",{class:"form-label"},"Email",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),type:"email",class:"form-input",required:""},null,512),[[p,o.email]])]),t("div",N,[e[4]||(e[4]=t("label",{class:"form-label"},"Пароль",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",class:"form-input",required:""},null,512),[[p,o.password]])]),o.error?(f(),d("div",L,y(o.error),1)):v("",!0),e[5]||(e[5]=t("button",{type:"submit",class:"btn btn-primary w-100"},"Войти",-1))],32),t("p",T,[e[7]||(e[7]=u(" Нет аккаунта? ",-1)),b(r,{to:"/register"},{default:x(()=>[...e[6]||(e[6]=[u("Зарегистрироваться",-1)])]),_:1})])])])}const E=g(S,[["render",j]]);export{E as default};
