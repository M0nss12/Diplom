import{_ as g,c as d,a as t,w,f as v,g as m,v as p,t as y,h as u,i as b,j as x,k,d as l,u as S,e as f}from"./index-CzgIJ5Um.js";const V={setup(){const n=l(""),e=l(""),i=l("");return S(),{email:n,password:e,error:i,handleLogin:async()=>{try{const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.value,password:e.value})}),a=await s.json();if(!s.ok)throw new Error(a.error);localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),window.location.href="/"}catch(s){i.value=s.message}}}}},_={class:"container animate-fade-in",style:{"max-width":"400px","margin-top":"3rem"}},h={class:"card p-4"},N={class:"form-group"},L={class:"form-group"},C={key:0,class:"message error"},T={class:"text-center mt-4"};function j(n,e,i,o,s,a){const c=k("router-link");return f(),d("div",_,[t("div",h,[e[8]||(e[8]=t("h2",{class:"text-center mb-4"},"Вход",-1)),t("form",{onSubmit:e[2]||(e[2]=w((...r)=>o.handleLogin&&o.handleLogin(...r),["prevent"]))},[t("div",N,[e[3]||(e[3]=t("label",{class:"form-label"},"Email",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),type:"email",class:"form-input",required:""},null,512),[[p,o.email]])]),t("div",L,[e[4]||(e[4]=t("label",{class:"form-label"},"Пароль",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),type:"password",class:"form-input",required:""},null,512),[[p,o.password]])]),o.error?(f(),d("div",C,y(o.error),1)):v("",!0),e[5]||(e[5]=t("button",{type:"submit",class:"btn btn-primary w-100"},"Войти",-1))],32),t("p",T,[e[7]||(e[7]=u(" Нет аккаунта? ",-1)),b(c,{to:"/register"},{default:x(()=>[...e[6]||(e[6]=[u("Зарегистрироваться",-1)])]),_:1})])])])}const E=g(V,[["render",j]]);export{E as default};
