import{_ as p,c as l,a as t,i as h,F as v,e as y,t as o,g as _,o as k,h as r,n as E}from"./index-Z1tz7U2i.js";const P={setup(){const i=_([]),n=_(1),d=_(1),e=_(0),c=async(s=1)=>{const b=localStorage.getItem("token");try{const u=await fetch(`/api/admin/logs?page=${s}`,{headers:{Authorization:`Bearer ${b}`}});if(u.ok){const g=await u.json();i.value=g.data,n.value=g.meta.currentPage,d.value=g.meta.totalPages,e.value=g.meta.totalItems}else i.value=[],d.value=1,e.value=0}catch(u){console.error(u),i.value=[]}},m=s=>{s>=1&&s<=d.value&&c(s)},a=s=>s?new Date(s).toLocaleString("ru-RU"):"-",f=s=>s.includes("DELETE")?"cancelled":s.includes("CREATE")||s.includes("REGISTER")?"delivered":s.includes("LOGIN")?"shipped":s.includes("UPDATE")?"pending":"";return k(()=>c(1)),{logs:i,page:n,totalPages:d,totalItems:e,fetchLogs:c,changePage:m,formatDate:a,getActionClass:f}}},C={class:"card p-4"},I={class:"header-actions"},L={class:"admin-table"},A={style:{"white-space":"nowrap","font-size":"0.85rem"}},D={key:0,style:{"font-weight":"500"}},x={key:1,class:"text-gray-400"},z={style:{"font-size":"0.9rem"}},B={style:{"font-size":"0.85rem",color:"#666"}},w={key:0,class:"text-center p-4"},R={key:1,class:"pagination mt-4"},S=["disabled"],T=["disabled"];function F(i,n,d,e,c,m){return r(),l("div",C,[t("div",I,[n[3]||(n[3]=t("h2",null,"ðŸ“œ Ð›Ð¾Ð³Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ (File Based)",-1)),t("button",{class:"btn btn-outline",onClick:n[0]||(n[0]=a=>e.fetchLogs(1))},"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ")]),t("table",L,[n[4]||(n[4]=t("thead",null,[t("tr",null,[t("th",null,"Ð’Ñ€ÐµÐ¼Ñ"),t("th",null,"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"),t("th",null,"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ"),t("th",null,"Ð”ÐµÑ‚Ð°Ð»Ð¸"),t("th",null,"IP")])],-1)),t("tbody",null,[(r(!0),l(v,null,y(e.logs,a=>(r(),l("tr",{key:a.id},[t("td",A,o(e.formatDate(a.created_at)),1),t("td",null,[a.username?(r(),l("span",D,"ðŸ‘¤ "+o(a.username),1)):(r(),l("span",x,"Ð“Ð¾ÑÑ‚ÑŒ"))]),t("td",null,[t("span",{class:E(["status-badge",e.getActionClass(a.action_type)])},o(a.action_type),3)]),t("td",z,o(a.details),1),t("td",B,o(a.ip_address||"-"),1)]))),128))])]),e.logs.length===0?(r(),l("div",w," Ð›Ð¾Ð³Ð¾Ð² Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð¸Ð»Ð¸ Ñ„Ð°Ð¹Ð» Ð¿ÑƒÑÑ‚. ")):h("",!0),e.totalPages>1?(r(),l("div",R,[t("button",{class:"btn btn-outline",disabled:e.page===1,onClick:n[1]||(n[1]=a=>e.changePage(e.page-1))},"ÐÐ°Ð·Ð°Ð´",8,S),t("span",null,"Ð¡Ñ‚Ñ€. "+o(e.page)+" Ð¸Ð· "+o(e.totalPages)+" (Ð’ÑÐµÐ³Ð¾: "+o(e.totalItems)+")",1),t("button",{class:"btn btn-outline",disabled:e.page===e.totalPages,onClick:n[2]||(n[2]=a=>e.changePage(e.page+1))},"Ð’Ð¿ÐµÑ€ÐµÐ´",8,T)])):h("",!0)])}const G=p(P,[["render",F]]);export{G as default};
