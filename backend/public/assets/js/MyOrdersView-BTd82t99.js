import{_,c as o,a as e,i as h,j as b,h as g,k as x,F as f,r as S,d as m,o as w,e as i,t as r,n as C,s as O}from"./index-BS7-ax_o.js";const I={setup(){const u=m([]),t=m(!0),d=m(null),a=async()=>{const n=localStorage.getItem("token");try{const l=await fetch("/api/orders/my",{headers:{Authorization:`Bearer ${n}`}});l.ok&&(u.value=await l.json())}catch(l){console.error(l)}finally{t.value=!1}},v=async n=>{d.value=n;const l=localStorage.getItem("token");try{(await fetch(`/api/orders/${n}/pay`,{method:"POST",headers:{Authorization:`Bearer ${l}`}})).ok?(await a(),alert("ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¿Ñ€Ð¾ÑˆÐ»Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾! (Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼)")):alert("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹")}catch{alert("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸")}finally{d.value=null}},y=async n=>{if(!confirm("Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð·Ð°ÐºÐ°Ð·?"))return;d.value=n;const l=localStorage.getItem("token");try{const c=await fetch(`/api/orders/${n}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${l}`}}),k=await c.json();c.ok?await a():alert(k.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹")}catch{alert("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸")}finally{d.value=null}},p=n=>({pending:"ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹",paid:"ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½",processing:"Ð’ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ",shipped:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½",delivered:"Ð”Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½",cancelled:"ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½"})[n]||n,s=n=>n==="pending"?"pending":n==="cancelled"?"cancelled":["paid","processing","shipped","delivered"].includes(n)?"delivered":"cancelled";return w(a),{orders:u,loading:t,actionId:d,payOrder:v,cancelOrder:y,getStatusText:p,getStatusClass:s}}},B={class:"container animate-fade-in",style:{"margin-top":"2rem"}},z={key:0,class:"text-center p-8"},T={key:1,class:"text-center p-8 card"},V={key:2,class:"orders-list"},j={class:"order-header"},A={class:"order-status"},N={class:"order-details"},F={class:"price"},M={class:"order-actions mt-4 text-right"},P=["onClick","disabled"],D=["onClick","disabled"];function E(u,t,d,a,v,y){const p=x("router-link");return i(),o("div",B,[t[7]||(t[7]=e("h1",{class:"mb-6"},"ðŸ“¦ ÐœÐ¾Ð¸ Ð·Ð°ÐºÐ°Ð·Ñ‹",-1)),a.loading?(i(),o("div",z,[...t[0]||(t[0]=[e("div",{class:"loader"},null,-1)])])):a.orders.length===0?(i(),o("div",T,[t[2]||(t[2]=e("p",null,"Ð£ Ð²Ð°Ñ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°ÐºÐ°Ð·Ð¾Ð².",-1)),h(p,{to:"/",class:"btn btn-primary mt-4"},{default:b(()=>[...t[1]||(t[1]=[g("Ð’ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³",-1)])]),_:1})])):(i(),o("div",V,[(i(!0),o(f,null,S(a.orders,s=>(i(),o("div",{key:s.id,class:"card p-6 mb-4 order-card"},[e("div",j,[e("div",null,[e("h3",null,"Ð—Ð°ÐºÐ°Ð· #"+r(s.id),1)]),e("div",A,[e("span",{class:C(["status-badge",a.getStatusClass(s.status)])},r(a.getStatusText(s.status)),3)])]),t[6]||(t[6]=e("div",{class:"divider"},null,-1)),e("div",N,[e("p",null,[t[3]||(t[3]=e("strong",null,"ÐÐ´Ñ€ÐµÑ:",-1)),g(" "+r(s.delivery_address),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Ð¡ÑƒÐ¼Ð¼Ð°:",-1)),t[5]||(t[5]=g()),e("span",F,r(s.total_amount)+" â‚½",1)])]),e("div",M,[s.status==="pending"?(i(),o(f,{key:0},[e("button",{class:"btn btn-outline-danger btn-sm",style:{"margin-right":"10px"},onClick:n=>a.cancelOrder(s.id),disabled:a.actionId===s.id},r(a.actionId===s.id?"...":"âŒ ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"),9,P),e("button",{class:"btn btn-primary btn-sm",onClick:n=>a.payOrder(s.id),disabled:a.actionId===s.id},r(a.actionId===s.id?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°...":"ðŸ’³ ÐžÐ¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ"),9,D)],64)):(i(),o("span",{key:1,style:O([{"font-weight":"bold"},{color:s.status==="cancelled"?"var(--danger)":"var(--success)"}])},r(s.status==="cancelled"?"â›” Ð—Ð°ÐºÐ°Ð· Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½":"âœ… ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾ / Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ"),5))])]))),128))]))])}const q=_(I,[["render",E],["__scopeId","data-v-cd2439cb"]]);export{q as default};
