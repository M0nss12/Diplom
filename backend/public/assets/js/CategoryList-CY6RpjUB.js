import{_ as k,c as n,a as l,i as d,A as y,F as m,e as C,t as i,j as v,k as r,v as a,q as w,T as U,o as M,h as s,n as V}from"./index-Z1tz7U2i.js";import{u as I}from"./useCrud-BTeG7eu8.js";const $={name:"CatalogCategoryList",setup(){const o=I("categories"),t=async b=>{const u=b.target.files[0];if(!u)return;const g=new FormData;g.append("image",u);try{const p=localStorage.getItem("token"),e=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`},body:g});if(e.ok){const f=await e.json();o.form.value.image_url=f.url}else alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ")}catch(p){console.error(p),alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ")}};return M(()=>{o.fetchItems()}),{...o,handleFileUpload:t}}},A={class:"card p-4"},P={class:"header-actions"},D={key:0,class:"no-results-message text-center p-4"},F={key:1,class:"admin-table"},L={key:0},S=["src"],T={key:1},B={style:{"max-width":"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},E={class:"actions-cell"},j=["onClick"],R=["onClick"],h=["onClick"],q={key:2,class:"pagination mt-4"},z=["disabled"],N=["disabled"],O={class:"modal-content card large-modal"},G={class:"grid-2"},H={class:"form-group"},J={class:"form-group"},K={class:"form-group"},Q={class:"form-group"},W={class:"form-group"},X={class:"form-group"},Y={class:"form-group full-width"},Z={key:0,class:"mt-2 text-center"},x=["src"],_={class:"form-group full-width"},c={class:"form-group checkbox-group full-width"},tt={class:"modal-actions full-width"};function lt(o,t,b,u,g,p){return s(),n("div",A,[l("div",P,[t[16]||(t[16]=l("h2",null,"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",-1)),o.isAdmin?(s(),n("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=e=>o.openEditModal())},"+ –î–æ–±–∞–≤–∏—Ç—å")):d("",!0)]),o.paginatedItems.length===0?(s(),n("p",D," –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è. ")):(s(),n("table",F,[l("thead",null,[l("tr",null,[t[22]||(t[22]=l("th",null,"ID",-1)),t[23]||(t[23]=l("th",null,"–§–æ—Ç–æ",-1)),t[24]||(t[24]=l("th",null,"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),t[25]||(t[25]=l("th",null,"–°–∫–∏–¥–∫–∞",-1)),o.isAdmin?(s(),n(m,{key:0},[t[17]||(t[17]=l("th",null,"Slug",-1)),t[18]||(t[18]=l("th",null,"–†–æ–¥–∏—Ç–µ–ª—å",-1)),t[19]||(t[19]=l("th",null,"–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞",-1)),t[20]||(t[20]=l("th",null,"Meta Title",-1)),t[21]||(t[21]=l("th",null,"–ê–∫—Ç–∏–≤–Ω–∞",-1))],64)):d("",!0),t[26]||(t[26]=l("th",null,"–î–µ–π—Å—Ç–≤–∏—è",-1))])]),l("tbody",null,[(s(!0),n(m,null,C(o.paginatedItems,e=>(s(),n(m,{key:e.id},[o.isAdmin||e.is_active?(s(),n("tr",L,[l("td",null,i(e.id),1),l("td",null,[e.image_url?(s(),n("img",{key:0,src:e.image_url,style:{width:"40px",height:"40px","object-fit":"cover","border-radius":"4px"}},null,8,S)):(s(),n("span",T,"-"))]),l("td",null,i(e.name),1),l("td",null,i(e.discount_percent||0)+"%",1),o.isAdmin?(s(),n(m,{key:0},[l("td",null,i(e.slug),1),l("td",null,i(e.parent_id||"–ù–µ—Ç"),1),l("td",null,i(e.sort_order),1),l("td",B,i(e.meta_title||"-"),1),l("td",null,[l("span",{class:V(e.is_active?"badge-green":"badge-red")},i(e.is_active?"–î–∞":"–ù–µ—Ç"),3)])],64)):d("",!0),l("td",E,[l("button",{class:"btn-sm view",onClick:f=>o.$router.push(`/catalog/categories/${e.id}`),title:"–ü—Ä–æ—Å–º–æ—Ç—Ä"},"üëÅÔ∏è",8,j),o.isAdmin?(s(),n(m,{key:0},[l("button",{class:"btn-sm edit",onClick:f=>o.openEditModal(e),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},"‚úèÔ∏è",8,R),l("button",{class:"btn-sm delete",onClick:f=>o.deleteItem(e.id),title:"–£–¥–∞–ª–∏—Ç—å"},"üóëÔ∏è",8,h)],64)):d("",!0)])])):d("",!0)],64))),128))])])),o.totalPages>1?(s(),n("div",q,[l("button",{class:"btn btn-outline",disabled:o.page===1,onClick:t[1]||(t[1]=(...e)=>o.prevPage&&o.prevPage(...e))},"–ù–∞–∑–∞–¥",8,z),l("span",null,"–°—Ç—Ä. "+i(o.page)+" –∏–∑ "+i(o.totalPages),1),l("button",{class:"btn btn-outline",disabled:o.page===o.totalPages,onClick:t[2]||(t[2]=(...e)=>o.nextPage&&o.nextPage(...e))},"–í–ø–µ—Ä–µ–¥",8,N)])):d("",!0),(s(),y(U,{to:"body"},[o.showEditModal?(s(),n("div",{key:0,class:"modal-overlay",onClick:t[15]||(t[15]=v((...e)=>o.closeModals&&o.closeModals(...e),["self"]))},[l("div",O,[l("h3",null,i(o.isEdit?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é":"–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"),1),l("form",{onSubmit:t[14]||(t[14]=v((...e)=>o.saveItem&&o.saveItem(...e),["prevent"]))},[l("div",G,[l("div",H,[t[27]||(t[27]=l("label",null,"–ù–∞–∑–≤–∞–Ω–∏–µ *",-1)),r(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.name=e),class:"form-input",required:""},null,512),[[a,o.form.name]])]),l("div",J,[t[28]||(t[28]=l("label",null,"Slug (URL)",-1)),r(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.form.slug=e),class:"form-input"},null,512),[[a,o.form.slug]])]),l("div",K,[t[29]||(t[29]=l("label",null,"–†–æ–¥–∏—Ç–µ–ª—å ID",-1)),r(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.form.parent_id=e),type:"number",class:"form-input"},null,512),[[a,o.form.parent_id]])]),l("div",Q,[t[30]||(t[30]=l("label",null,"–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞",-1)),r(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.form.sort_order=e),type:"number",class:"form-input"},null,512),[[a,o.form.sort_order]])]),l("div",W,[t[31]||(t[31]=l("label",null,"–°–∫–∏–¥–∫–∞ (%)",-1)),r(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.form.discount_percent=e),type:"number",class:"form-input"},null,512),[[a,o.form.discount_percent]])]),l("div",X,[t[32]||(t[32]=l("label",null,"Meta Title",-1)),r(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.form.meta_title=e),class:"form-input"},null,512),[[a,o.form.meta_title]])]),l("div",Y,[t[33]||(t[33]=l("label",null,"URL –ö–∞—Ä—Ç–∏–Ω–∫–∏ / –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ",-1)),r(l("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.form.image_url=e),class:"form-input mb-2",placeholder:"–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª"},null,512),[[a,o.form.image_url]]),l("input",{type:"file",onChange:t[10]||(t[10]=(...e)=>u.handleFileUpload&&u.handleFileUpload(...e)),class:"form-input",accept:"image/*"},null,32),o.form.image_url?(s(),n("div",Z,[l("img",{src:o.form.image_url,style:{"max-height":"100px",border:"1px solid #ccc","border-radius":"4px"}},null,8,x)])):d("",!0)])]),l("div",_,[t[34]||(t[34]=l("label",null,"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),r(l("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.form.description=e),class:"form-textarea"},null,512),[[a,o.form.description]])]),l("div",c,[r(l("input",{type:"checkbox",id:"act","onUpdate:modelValue":t[12]||(t[12]=e=>o.form.is_active=e)},null,512),[[w,o.form.is_active]]),t[35]||(t[35]=l("label",{for:"act"},"–ê–∫—Ç–∏–≤–Ω–∞ (Is Active)",-1))]),l("div",tt,[l("button",{type:"button",class:"btn btn-outline",onClick:t[13]||(t[13]=(...e)=>o.closeModals&&o.closeModals(...e))},"–û—Ç–º–µ–Ω–∞"),t[36]||(t[36]=l("button",{type:"submit",class:"btn btn-primary"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):d("",!0)]))])}const st=k($,[["render",lt]]);export{st as default};
