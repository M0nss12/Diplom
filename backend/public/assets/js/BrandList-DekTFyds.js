import{_ as M,c as n,a as o,i as m,A as U,F as k,e as E,t as r,j as w,k as a,v as d,x as I,q as V,T as $,g as C,o as P,h as s,n as h}from"./index-Z1tz7U2i.js";import{u as L}from"./useCrud-BTeG7eu8.js";const A={name:"CatalogBrandList",setup(){const t=L("brands"),l=C(null),u=C(null),v=p=>{u.value=p.target.files[0],u.value&&(t.form.value.logo_url=URL.createObjectURL(u.value))};t.saveItem=async()=>{const p=localStorage.getItem("token"),e=t.isEdit.value?`/api/brands/${t.form.value.id}`:"/api/brands",g=t.isEdit.value?"PUT":"POST",f=new FormData;for(const i in t.form.value){if(i==="file"||i==="logo_url")continue;const b=typeof t.form.value[i]=="boolean"?t.form.value[i]?"true":"false":t.form.value[i]||"";f.append(i,b)}u.value?f.append("image",u.value):t.form.value.logo_url?f.append("logo_url",t.form.value.logo_url):t.isEdit.value&&!t.form.value.logo_url&&f.append("logo_url","");try{const i=await fetch(e,{method:g,headers:{Authorization:`Bearer ${p}`},body:f});if(i.ok)await t.fetchItems(),t.closeModals(),u.value=null,l.value&&(l.value.value="");else{const b=await i.json();alert(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ${b.error||i.statusText}`)}}catch(i){console.error("Network Error:",i),alert("–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.")}};const y=t.openEditModal;return t.openEditModal=p=>{y(p),u.value=null,l.value&&(l.value.value=""),p||(t.form.value.status="active")},P(()=>{t.fetchItems()}),{fileInput:l,handleFileChange:v,...t}}},B={class:"card p-4"},F={class:"header-actions"},D={key:0,class:"no-results-message text-center p-4"},T={key:1,class:"admin-table"},j={key:0},R=["src"],S={key:1},N=["href"],O={key:1},q={key:0,style:{"max-width":"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},z={class:"actions-cell"},K=["onClick"],G=["onClick"],H=["onClick"],J={key:2,class:"pagination mt-4"},Q=["disabled"],W=["disabled"],X={class:"modal-content card large-modal"},Y={class:"grid-2"},Z={class:"form-group"},x={class:"form-group"},_={class:"form-group full-width"},c={key:0,class:"mt-2 text-center"},ll=["src"],ol={class:"form-group"},tl={class:"form-group"},el={class:"form-group"},sl={class:"form-group"},nl={class:"form-group"},il={class:"form-group full-width"},rl={class:"form-group checkbox-group full-width"},al={class:"modal-actions full-width"};function ul(t,l,u,v,y,p){return s(),n("div",B,[o("div",F,[l[17]||(l[17]=o("h2",null,"–ë—Ä–µ–Ω–¥—ã",-1)),t.isAdmin?(s(),n("button",{key:0,class:"btn btn-primary",onClick:l[0]||(l[0]=e=>t.openEditModal())},"+ –î–æ–±–∞–≤–∏—Ç—å")):m("",!0)]),t.paginatedItems.length===0?(s(),n("p",D," –ù–µ—Ç –±—Ä–µ–Ω–¥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è. ")):(s(),n("table",T,[o("thead",null,[o("tr",null,[l[18]||(l[18]=o("th",null,"ID",-1)),l[19]||(l[19]=o("th",null,"–õ–æ–≥–æ",-1)),l[20]||(l[20]=o("th",null,"–ù–∞–∑–≤–∞–Ω–∏–µ",-1)),l[21]||(l[21]=o("th",null,"–°—Ç—Ä–∞–Ω–∞",-1)),l[22]||(l[22]=o("th",null,"–°–∞–π—Ç",-1)),l[23]||(l[23]=o("th",null,"–ì–æ–¥",-1)),l[24]||(l[24]=o("th",null,"Email",-1)),l[25]||(l[25]=o("th",null,"–ü–æ–ø—É–ª—è—Ä–Ω—ã–π",-1)),l[26]||(l[26]=o("th",null,"–°—Ç–∞—Ç—É—Å",-1)),t.isAdmin?(s(),n("th",j,"Meta Keys")):m("",!0),l[27]||(l[27]=o("th",null,"–î–µ–π—Å—Ç–≤–∏—è",-1))])]),o("tbody",null,[(s(!0),n(k,null,E(t.paginatedItems,e=>(s(),n("tr",{key:e.id},[o("td",null,r(e.id),1),o("td",null,[e.logo_url?(s(),n("img",{key:0,src:e.logo_url,style:{width:"40px",height:"40px","object-fit":"contain"}},null,8,R)):(s(),n("span",S,"-"))]),o("td",null,r(e.name),1),o("td",null,r(e.country||"-"),1),o("td",null,[e.website_url?(s(),n("a",{key:0,href:e.website_url,target:"_blank",class:"text-link"},r(e.website_url.replace(/^(https?:\/\/)?(www\.)?/,"").split("/")[0]),9,N)):(s(),n("span",O,"-"))]),o("td",null,r(e.year_founded||"-"),1),o("td",null,r(e.contact_email||"-"),1),o("td",null,[o("span",{class:h(e.is_popular?"badge-green":"")},r(e.is_popular?"–î–∞":"–ù–µ—Ç"),3)]),o("td",null,r(e.status),1),t.isAdmin?(s(),n("td",q,r(e.meta_keywords||"-"),1)):m("",!0),o("td",z,[o("button",{class:"btn-sm view",onClick:g=>t.$router.push(`/catalog/brands/${e.id}`),title:"–ü—Ä–æ—Å–º–æ—Ç—Ä"},"üëÅÔ∏è",8,K),t.isAdmin?(s(),n(k,{key:0},[o("button",{class:"btn-sm edit",onClick:g=>t.openEditModal(e),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},"‚úèÔ∏è",8,G),o("button",{class:"btn-sm delete",onClick:g=>t.deleteItem(e.id),title:"–£–¥–∞–ª–∏—Ç—å"},"üóëÔ∏è",8,H)],64)):m("",!0)])]))),128))])])),t.totalPages>1?(s(),n("div",J,[o("button",{class:"btn btn-outline",disabled:t.page===1,onClick:l[1]||(l[1]=(...e)=>t.prevPage&&t.prevPage(...e))},"–ù–∞–∑–∞–¥",8,Q),o("span",null,"–°—Ç—Ä. "+r(t.page)+" –∏–∑ "+r(t.totalPages),1),o("button",{class:"btn btn-outline",disabled:t.page===t.totalPages,onClick:l[2]||(l[2]=(...e)=>t.nextPage&&t.nextPage(...e))},"–í–ø–µ—Ä–µ–¥",8,W)])):m("",!0),(s(),U($,{to:"body"},[t.showEditModal?(s(),n("div",{key:0,class:"modal-overlay",onClick:l[16]||(l[16]=w((...e)=>t.closeModals&&t.closeModals(...e),["self"]))},[o("div",X,[o("h3",null,r(t.isEdit?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥":"–°–æ–∑–¥–∞—Ç—å –±—Ä–µ–Ω–¥"),1),o("form",{onSubmit:l[15]||(l[15]=w((...e)=>t.saveItem&&t.saveItem(...e),["prevent"]))},[o("div",Y,[o("div",Z,[l[28]||(l[28]=o("label",null,"–ù–∞–∑–≤–∞–Ω–∏–µ *",-1)),a(o("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>t.form.name=e),class:"form-input",required:""},null,512),[[d,t.form.name]])]),o("div",x,[l[29]||(l[29]=o("label",null,"–°—Ç—Ä–∞–Ω–∞",-1)),a(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>t.form.country=e),class:"form-input"},null,512),[[d,t.form.country]])]),o("div",_,[l[30]||(l[30]=o("label",null,"–õ–æ–≥–æ—Ç–∏–ø (URL / –ó–∞–≥—Ä—É–∑–∫–∞)",-1)),a(o("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>t.form.logo_url=e),class:"form-input mb-2",placeholder:"–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª"},null,512),[[d,t.form.logo_url]]),o("input",{type:"file",ref:"fileInput",onChange:l[6]||(l[6]=(...e)=>v.handleFileChange&&v.handleFileChange(...e)),class:"form-input",accept:"image/*"},null,544),t.form.logo_url?(s(),n("div",c,[o("img",{src:t.form.logo_url,style:{"max-height":"80px","max-width":"150px",border:"1px solid #ccc",padding:"5px","border-radius":"4px","object-fit":"contain"}},null,8,ll)])):m("",!0)]),o("div",ol,[l[31]||(l[31]=o("label",null,"–°–∞–π—Ç (URL)",-1)),a(o("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>t.form.website_url=e),class:"form-input"},null,512),[[d,t.form.website_url]])]),o("div",tl,[l[32]||(l[32]=o("label",null,"–ì–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è",-1)),a(o("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>t.form.year_founded=e),type:"number",class:"form-input"},null,512),[[d,t.form.year_founded]])]),o("div",el,[l[33]||(l[33]=o("label",null,"Email –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",-1)),a(o("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>t.form.contact_email=e),class:"form-input"},null,512),[[d,t.form.contact_email]])]),o("div",sl,[l[34]||(l[34]=o("label",null,"Meta Keywords",-1)),a(o("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>t.form.meta_keywords=e),class:"form-input"},null,512),[[d,t.form.meta_keywords]])]),o("div",nl,[l[36]||(l[36]=o("label",null,"–°—Ç–∞—Ç—É—Å",-1)),a(o("select",{"onUpdate:modelValue":l[11]||(l[11]=e=>t.form.status=e),class:"form-input"},[...l[35]||(l[35]=[o("option",{value:"active"},"Active",-1),o("option",{value:"inactive"},"Inactive",-1)])],512),[[I,t.form.status]])])]),o("div",il,[l[37]||(l[37]=o("label",null,"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),a(o("textarea",{"onUpdate:modelValue":l[12]||(l[12]=e=>t.form.description=e),class:"form-textarea"},null,512),[[d,t.form.description]])]),o("div",rl,[a(o("input",{type:"checkbox",id:"pop","onUpdate:modelValue":l[13]||(l[13]=e=>t.form.is_popular=e)},null,512),[[V,t.form.is_popular]]),l[38]||(l[38]=o("label",{for:"pop"},"–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –±—Ä–µ–Ω–¥ (Is Popular)",-1))]),o("div",al,[o("button",{type:"button",class:"btn btn-outline",onClick:l[14]||(l[14]=(...e)=>t.closeModals&&t.closeModals(...e))},"–û—Ç–º–µ–Ω–∞"),l[39]||(l[39]=o("button",{type:"submit",class:"btn btn-primary"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1))])],32)])])):m("",!0)]))])}const ml=M(A,[["render",ul]]);export{ml as default};
