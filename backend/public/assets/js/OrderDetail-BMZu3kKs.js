import{_ as g,c as o,a as s,t as e,i as v,n as f,d as l,F as c,g as u,o as _,C as k,h as a}from"./index-Z1tz7U2i.js";const F={setup(){const i=k(),t=u(null),r=u(!0),n=u(!1);return _(async()=>{const d=localStorage.getItem("user");try{n.value=d&&JSON.parse(d).role==="admin"}catch{n.value=!1}const p=localStorage.getItem("token"),m=await fetch(`/api/orders/${i.params.id}`,{headers:{Authorization:`Bearer ${p}`}});m.ok&&(t.value=await m.json(),t.value.total_amount=parseFloat(t.value.total_amount),t.value.shipping_cost=parseFloat(t.value.shipping_cost)),r.value=!1}),{item:t,loading:r,isAdmin:n}}},y={class:"container animate-fade-in"},x={key:0,class:"text-center p-4"},b={key:1,class:"card p-6"},S={class:"details-grid mt-4"},w={class:"full-width"},B={class:"full-width"},C={key:2,class:"message error"};function N(i,t,r,n,d,p){return a(),o("div",y,[s("button",{onClick:t[0]||(t[0]=m=>i.$router.push("/catalog/orders")),class:"btn btn-outline mb-4"},"← Назад"),n.loading?(a(),o("div",x,"Загрузка...")):n.item?(a(),o("div",b,[s("h2",null,"Заказ #"+e(n.item.id),1),s("div",S,[s("p",null,[t[1]||(t[1]=s("strong",null,"Статус:",-1)),s("span",{class:f(["status-badge",{"status-pending":n.item.status==="pending","status-paid":n.item.status==="paid","status-shipped":n.item.status==="shipped"||n.item.status==="delivered","status-cancelled":n.item.status==="cancelled"}])},e(n.item.status),3)]),s("p",null,[t[2]||(t[2]=s("strong",null,"Сумма товаров:",-1)),l(" "+e((parseFloat(n.item.total_amount)-parseFloat(n.item.shipping_cost)).toFixed(2))+" ₽",1)]),s("p",null,[t[3]||(t[3]=s("strong",null,"Доставка:",-1)),l(" "+e(parseFloat(n.item.shipping_cost).toFixed(2))+" ₽",1)]),s("p",null,[t[4]||(t[4]=s("strong",null,"Итого к оплате:",-1)),l(" "+e(parseFloat(n.item.total_amount).toFixed(2))+" ₽",1)]),s("p",null,[t[5]||(t[5]=s("strong",null,"Получатель:",-1)),l(" "+e(n.item.recipient_name||"—"),1)]),s("p",null,[t[6]||(t[6]=s("strong",null,"Телефон:",-1)),l(" "+e(n.item.recipient_phone||"—"),1)]),s("p",w,[t[7]||(t[7]=s("strong",null,"Адрес:",-1)),l(" "+e(n.item.delivery_address),1)]),n.isAdmin?(a(),o(c,{key:0},[s("p",null,[t[8]||(t[8]=s("strong",null,"User ID:",-1)),l(" "+e(n.item.user_id),1)]),s("p",null,[t[9]||(t[9]=s("strong",null,"Метод оплаты:",-1)),l(" "+e(n.item.payment_method||"Не указан"),1)]),s("p",null,[t[10]||(t[10]=s("strong",null,"Трек-номер:",-1)),l(" "+e(n.item.tracking_number||"Не присвоен"),1)]),s("p",B,[t[11]||(t[11]=s("strong",null,"Комментарий пользователя:",-1)),l(" "+e(n.item.user_comment||"Нет"),1)])],64)):v("",!0)])])):(a(),o("div",C,"Заказ не найден"))])}const I=g(F,[["render",N]]);export{I as default};
