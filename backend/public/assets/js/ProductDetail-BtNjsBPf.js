import{_ as h,c as s,a as n,t as r,i as f,d as i,F as w,g as u,l as B,o as N,C as D,h as l}from"./index-Z1tz7U2i.js";async function v(c){try{const t=await fetch(`/api/${c}`);return t.ok?await t.json():[]}catch(t){return console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ${c}:`,t),[]}}const C={setup(){const c=D(),t=u(null),g=u(!0),o=u(null),y=u([]),p=u([]),_=B(()=>o.value&&o.value.role==="admin"),b=a=>{const e=y.value.find(d=>d.id===a);return e?e.name:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"},x=a=>{const e=p.value.find(d=>d.id===a);return e?e.name:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"},k=a=>{const e=p.value.find(d=>d.id===a);return e?e.logo_url:null};return N(async()=>{g.value=!0;const a=localStorage.getItem("user");o.value=a?JSON.parse(a):null;const[e,d]=await Promise.all([v("categories"),v("brands")]);y.value=e,p.value=d;try{const m=await fetch(`/api/products/${c.params.id}`);m.ok&&(t.value=await m.json())}catch(m){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∞:",m)}finally{g.value=!1}}),{product:t,loading:g,isAdmin:_,getCategoryName:b,getBrandName:x,getBrandLogo:k}}},S={class:"container animate-fade-in"},j={key:0,class:"text-center p-4"},L={key:1,class:"detail-page"},R={class:"card p-6 mb-6"},V={class:"grid-2 mt-4",style:{display:"grid","grid-template-columns":"1fr 2fr",gap:"2rem"}},A={class:"img-container text-center"},F=["src"],I={key:1,class:"p-4 bg-gray-100 rounded text-gray"},P={class:"info-list"},q={class:"text-xl",style:{color:"var(--primary)"}},E={key:0,style:{"text-decoration":"line-through",color:"#999","margin-left":"10px"}},J={class:"brand-block mt-2 mb-2",style:{display:"flex","align-items":"center",gap:"10px"}},K=["src"],M={class:"mt-4"},O={key:2,class:"message error"};function T(c,t,g,o,y,p){return l(),s("div",S,[n("button",{onClick:t[0]||(t[0]=_=>c.$router.push("/catalog/products")),class:"btn btn-outline mb-4"},"‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"),o.loading?(l(),s("div",j,"–ó–∞–≥—Ä—É–∑–∫–∞...")):o.product?(l(),s("div",L,[n("div",R,[n("h2",null,r(o.product.name)+" (ID: "+r(o.product.id)+")",1),n("div",V,[n("div",A,[o.product.image_url?(l(),s("img",{key:0,src:o.product.image_url,class:"w-100 rounded",style:{"max-height":"300px","object-fit":"contain"}},null,8,F)):(l(),s("div",I,"–ù–µ—Ç —Ñ–æ—Ç–æ"))]),n("div",P,[n("p",null,[t[1]||(t[1]=n("strong",null,"–¶–µ–Ω–∞:",-1)),n("span",q,r(o.product.price)+" ‚ÇΩ",1),o.product.old_price?(l(),s("span",E,r(o.product.old_price)+" ‚ÇΩ",1)):f("",!0)]),n("p",null,[t[2]||(t[2]=n("strong",null,"–û—Å—Ç–∞—Ç–æ–∫:",-1)),i(" "+r(o.product.quantity_in_stock)+" —à—Ç.",1)]),n("p",null,[t[3]||(t[3]=n("strong",null,"–í–µ—Å:",-1)),i(" "+r(o.product.weight||"-")+" –∫–≥",1)]),n("p",null,[t[4]||(t[4]=n("strong",null,"–†–µ–π—Ç–∏–Ω–≥:",-1)),i(" ‚≠ê "+r(o.product.rating),1)]),n("p",null,[t[5]||(t[5]=n("strong",null,"–ö–∞—Ç–µ–≥–æ—Ä–∏—è:",-1)),i(" "+r(o.getCategoryName(o.product.category_id)),1)]),n("div",J,[t[6]||(t[6]=n("strong",null,"–ë—Ä–µ–Ω–¥:",-1)),o.getBrandLogo(o.product.brand_id)?(l(),s("img",{key:0,src:o.getBrandLogo(o.product.brand_id),alt:"Logo",style:{height:"70px",width:"auto","object-fit":"contain"}},null,8,K)):f("",!0),n("span",null,r(o.getBrandName(o.product.brand_id)),1)]),n("p",null,[t[7]||(t[7]=n("strong",null,"–ü–æ–ø—É–ª—è—Ä–Ω—ã–π (–¢–æ–ø):",-1)),i(" "+r(o.product.is_featured?"‚úÖ –î–∞":"‚ùå –ù–µ—Ç"),1)]),n("p",M,[t[8]||(t[8]=n("strong",null,"–û–ø–∏—Å–∞–Ω–∏–µ:",-1)),t[9]||(t[9]=n("br",null,null,-1)),i(r(o.product.description),1)]),o.isAdmin?(l(),s(w,{key:0},[t[11]||(t[11]=n("h4",{class:"mt-4",style:{"border-top":"1px solid #eee","padding-top":"10px"}},"üìä –î–∞–Ω–Ω—ã–µ –¥–ª—è –ê–¥–º–∏–Ω–∞",-1)),n("p",null,[t[10]||(t[10]=n("strong",null,"SKU (–ê—Ä—Ç–∏–∫—É–ª):",-1)),i(" "+r(o.product.sku||"-"),1)])],64)):f("",!0)])])])])):(l(),s("div",O,"–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"))])}const z=h(C,[["render",T]]);export{z as default};
