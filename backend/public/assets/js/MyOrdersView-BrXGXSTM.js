import{_,c as i,a as n,b as h,w as b,d as u,r as w,F as k,e as x,g as y,o as S,h as r,t as l,n as C,s as O}from"./index-Z1tz7U2i.js";const B={setup(){const p=y([]),t=y(!0),c=y(null),a=async()=>{const s=localStorage.getItem("token");if(!s){t.value=!1;return}try{const o=await fetch("/api/orders/my",{headers:{Authorization:`Bearer ${s}`}});o.ok?p.value=await o.json():o.status===401&&console.warn("ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½")}catch(o){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð·Ð°ÐºÐ°Ð·Ð¾Ð²:",o)}finally{t.value=!1}},v=async s=>{c.value=s;const o=localStorage.getItem("token");try{const d=await fetch(`/api/orders/${s}/pay`,{method:"POST",headers:{Authorization:`Bearer ${o}`}}),m=await d.json();d.ok?(await a(),alert(`Ð—Ð°ÐºÐ°Ð· #${s} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð¿Ð»Ð°Ñ‡ÐµÐ½! (Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼)`)):alert(m.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹")}catch{alert("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸ Ð¿Ñ€Ð¸ Ð¾Ð¿Ð»Ð°Ñ‚Ðµ")}finally{c.value=null}},f=async s=>{if(!confirm("Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð·Ð°ÐºÐ°Ð·? ÐžÑ‚Ð¼ÐµÐ½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð°, ÐµÑÐ»Ð¸ Ð·Ð°ÐºÐ°Ð· ÑƒÐ¶Ðµ Ð² ÑÐ±Ð¾Ñ€ÐºÐµ."))return;c.value=s;const o=localStorage.getItem("token");try{const d=await fetch(`/api/orders/${s}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${o}`}}),m=await d.json();d.ok?(await a(),alert(`Ð—Ð°ÐºÐ°Ð· #${s} Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½.`)):alert(m.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹. Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð·Ð°ÐºÐ°Ð· ÑƒÐ¶Ðµ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ.")}catch{alert("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸ Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¼ÐµÐ½Ðµ")}finally{c.value=null}},g=s=>({pending:"ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹",paid:"ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½",processing:"Ð’ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ",shipped:"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½",delivered:"Ð”Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½",cancelled:"ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½"})[s]||s,e=s=>s==="pending"?"pending":s==="cancelled"?"cancelled":["paid","processing","shipped","delivered"].includes(s)?"delivered":"unknown";return S(a),{orders:p,loading:t,actionId:c,payOrder:v,cancelOrder:f,getStatusText:g,getStatusClass:e}}},z={class:"container animate-fade-in",style:{"margin-top":"2rem"}},T={key:0,class:"text-center p-8"},I={key:1,class:"text-center p-8 card"},V={key:2,class:"orders-list"},j={class:"order-header"},A={class:"order-status"},N={class:"order-details"},F={class:"price"},L={class:"order-actions mt-4 text-right"},M=["onClick","disabled"],P=["onClick","disabled"],$={key:1,class:"text-sm",style:{color:"var(--secondary)"}};function D(p,t,c,a,v,f){const g=w("router-link");return r(),i("div",z,[t[10]||(t[10]=n("h1",{class:"mb-6"},"ðŸ“¦ ÐœÐ¾Ð¸ Ð·Ð°ÐºÐ°Ð·Ñ‹",-1)),a.loading?(r(),i("div",T,[...t[0]||(t[0]=[n("div",{class:"loader"},null,-1)])])):a.orders.length===0?(r(),i("div",I,[t[2]||(t[2]=n("p",null,"Ð£ Ð²Ð°Ñ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°ÐºÐ°Ð·Ð¾Ð².",-1)),h(g,{to:"/",class:"btn btn-primary mt-4"},{default:b(()=>[...t[1]||(t[1]=[u("Ð’ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³",-1)])]),_:1})])):(r(),i("div",V,[(r(!0),i(k,null,x(a.orders,e=>(r(),i("div",{key:e.id,class:"card p-6 mb-4 order-card"},[n("div",j,[n("div",null,[n("h3",null,"Ð—Ð°ÐºÐ°Ð· #"+l(e.id),1)]),n("div",A,[n("span",{class:C(["status-badge",a.getStatusClass(e.status)])},l(a.getStatusText(e.status)),3)])]),t[9]||(t[9]=n("div",{class:"divider"},null,-1)),n("div",N,[n("p",null,[t[3]||(t[3]=n("strong",null,"Ð¢Ñ€ÐµÐºÐ¸Ð½Ð³:",-1)),u(" "+l(e.tracking_number),1)]),n("p",null,[t[4]||(t[4]=n("strong",null,"ÐÐ´Ñ€ÐµÑ:",-1)),u(" "+l(e.delivery_address),1)]),n("p",null,[t[5]||(t[5]=n("strong",null,"ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»ÑŒ:",-1)),u(" "+l(e.recipient_name)+" ("+l(e.recipient_phone)+")",1)]),n("p",null,[t[6]||(t[6]=n("strong",null,"ÐžÐ¿Ð»Ð°Ñ‚Ð°:",-1)),u(" "+l(e.payment_method),1)]),n("p",null,[t[7]||(t[7]=n("strong",null,"Ð¡ÑƒÐ¼Ð¼Ð°:",-1)),t[8]||(t[8]=u()),n("span",F,l((e.total_amount*1).toLocaleString())+" â‚½",1)])]),n("div",L,[e.status==="pending"?(r(),i(k,{key:0},[n("button",{class:"btn btn-outline-danger btn-lg",style:{"margin-right":"15px"},onClick:s=>a.cancelOrder(e.id),disabled:a.actionId===e.id},l(a.actionId===e.id?"ÐžÑ‚Ð¼ÐµÐ½ÑÐµÐ¼...":"âŒ ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·"),9,M),e.payment_method!=="ÐÐ°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸"?(r(),i("button",{key:0,class:"btn btn-primary btn-lg",onClick:s=>a.payOrder(e.id),disabled:a.actionId===e.id},l(a.actionId===e.id?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°...":"ðŸ’³ ÐžÐ¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð¾Ð½Ð»Ð°Ð¹Ð½"),9,P)):(r(),i("span",$," ÐžÐ¿Ð»Ð°Ñ‚Ð°: "+l(e.payment_method)+". ",1))],64)):(r(),i("span",{key:1,style:O([{"font-weight":"bold"},{color:e.status==="cancelled"?"var(--danger)":"var(--success)"}])},l(e.status==="cancelled"?"â›” Ð—Ð°ÐºÐ°Ð· Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½":"âœ… Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ / ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½"),5))])]))),128))]))])}const q=_(B,[["render",D]]);export{q as default};
